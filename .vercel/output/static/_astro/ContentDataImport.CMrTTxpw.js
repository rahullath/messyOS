import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.Bd8wGOW-.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./index.c0qeY2gs.js";function N(){const[r,c]=n.useState(null),[o,x]=n.useState(!1),[s,a]=n.useState(null),[m,i]=n.useState(null),h=t=>{const l=t.target.files?.[0];l&&(c(l),a(null),i(null))},p=async()=>{if(r){x(!0),i(null);try{const t=new FormData;t.append("serializd_data",r);const d=await(await fetch("/api/content/import/serializd",{method:"POST",body:t})).json();d.success?a(d):i(d.error||"Import failed")}catch(t){i(t instanceof Error?t.message:"Import failed")}finally{x(!1)}}},u=()=>{c(null),a(null),i(null);const t=document.getElementById("content-file-input");t&&(t.value="")};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Serializd Content Import"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Import your enriched Serializd export data"})]})]}),!s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content-file-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Serializd Export File"}),e.jsx("input",{id:"content-file-input",type:"file",accept:".csv,.json,text/csv,application/json",onChange:h,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Supports enriched CSV and JSON exports from Serializd with TMDB data"})]}),r&&e.jsx("div",{className:"bg-gray-50 rounded-md p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024).toFixed(1)," KB • ",r.type||"Unknown type"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:r.name.endsWith(".json")?"📊 JSON":"📋 CSV"})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Enhanced Serializd Format Expected:"}),e.jsxs("div",{className:"text-xs text-blue-800 space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Required fields:"})," Title, Rating, Watch_Date, TMDB_ID"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Enhanced fields:"})," Genres, Cast, Overview, Season_Episode, Review_Text"]}),e.jsxs("div",{className:"mt-2 p-2 bg-blue-100 rounded text-blue-700",children:[e.jsx("p",{children:e.jsx("strong",{children:"✨ This importer handles:"})}),e.jsxs("ul",{className:"list-disc list-inside text-xs mt-1 space-y-1",children:[e.jsx("li",{children:"Rich TMDB metadata (cast, genres, ratings)"}),e.jsx("li",{children:"TV shows with season/episode tracking"}),e.jsx("li",{children:"Personal reviews and ratings"}),e.jsx("li",{children:"Duplicate detection and prevention"}),e.jsx("li",{children:"Batch processing for large imports"})]})]})]})]}),m&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsx("p",{className:"text-sm font-medium text-red-900",children:"Import Error"})]}),e.jsx("p",{className:"text-sm text-red-800 mt-1",children:m})]}),e.jsx("button",{onClick:p,disabled:!r||o,className:"w-full bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:o?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Serializd Data..."]}):"Import Serializd Content"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("h4",{className:"text-sm font-medium text-green-900",children:"Import Successful!"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-700",children:s.stats.imported}),e.jsx("div",{className:"text-xs text-green-600",children:"Imported"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-gray-700",children:s.stats.duplicates}),e.jsx("div",{className:"text-xs text-gray-600",children:"Duplicates"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-700",children:s.stats.movies}),e.jsx("div",{className:"text-xs text-blue-600",children:"Movies"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-700",children:s.stats.tv_shows}),e.jsx("div",{className:"text-xs text-purple-600",children:"TV Shows"})]})]}),e.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"📊 Content Stats:"})}),e.jsxs("ul",{className:"text-xs space-y-1 ml-4",children:[e.jsxs("li",{children:["• Total processed: ",s.stats.total]}),e.jsxs("li",{children:["• Rated entries: ",s.stats.rated_entries]}),e.jsxs("li",{children:["• Average rating: ",s.stats.avg_rating.toFixed(1),"/10"]}),e.jsxs("li",{children:["• Date range: ",s.stats.date_range]})]})]}),s.stats.top_genres.length>0&&e.jsxs("div",{children:[e.jsx("p",{children:e.jsx("strong",{children:"🎭 Top Genres:"})}),e.jsx("ul",{className:"text-xs space-y-1 ml-4",children:s.stats.top_genres.slice(0,3).map((t,l)=>e.jsxs("li",{children:["• ",t.genre," (",t.count,")"]},l))})]})]}),s.errors&&s.errors.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"⚠️ Warnings:"}),e.jsx("ul",{className:"list-disc list-inside text-xs text-yellow-800 mt-1",children:s.errors.map((t,l)=>e.jsx("li",{children:t},l))})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:()=>window.location.href="/content",className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-md hover:bg-purple-700 transition-colors",children:"View Content Library →"})]})]})]})}export{N as default};
