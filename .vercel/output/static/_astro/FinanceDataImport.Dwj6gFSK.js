import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.Bd8wGOW-.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./index.c0qeY2gs.js";function g(){const[s,x]=c.useState({}),[i,l]=c.useState(!1),[o,r]=c.useState(""),n=(t,d)=>{x(a=>({...a,[t]:d}))},p=async()=>{if(!s.bank&&!s.crypto&&!s.expenses){alert("Please select at least one file to import");return}l(!0),r("");try{const t=new FormData;t.append("userId","368deac7-8526-45eb-927a-6a373c95d8c6"),s.bank&&t.append("bank",s.bank),s.crypto&&t.append("crypto",s.crypto),s.expenses&&t.append("expenses",s.expenses);const a=await(await fetch("/api/import/finance",{method:"POST",body:t})).json();a.success?(r(`✅ ${a.message}`),setTimeout(()=>window.location.reload(),2e3)):r(`❌ ${a.message}`)}catch(t){r(`❌ Import failed: ${t.message}`)}finally{l(!1)}};return e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary mb-4",children:"Import Finance Data"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Bank Statement CSV (Optional)"}),e.jsx("input",{type:"file",accept:".csv",onChange:t=>t.target.files?.[0]&&n("bank",t.target.files[0]),className:"w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Crypto Holdings (cryptoholdings.txt)"}),e.jsx("input",{type:"file",accept:".txt",onChange:t=>t.target.files?.[0]&&n("crypto",t.target.files[0]),className:"w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Manual Expenses (expenses.txt)"}),e.jsx("input",{type:"file",accept:".txt",onChange:t=>t.target.files?.[0]&&n("expenses",t.target.files[0]),className:"w-full px-3 py-2 bg-surface border border-border rounded-lg text-text-primary"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-text-muted",children:"Files selected:"}),e.jsxs("div",{className:"mt-1 space-y-1",children:[s.bank&&e.jsxs("div",{className:"text-accent-success",children:["✓ Bank Statement: ",s.bank.name]}),s.crypto&&e.jsxs("div",{className:"text-accent-success",children:["✓ Crypto Holdings: ",s.crypto.name]}),s.expenses&&e.jsxs("div",{className:"text-accent-success",children:["✓ Manual Expenses: ",s.expenses.name]}),!s.bank&&!s.crypto&&!s.expenses&&e.jsx("div",{className:"text-text-muted",children:"No files selected"})]})]})}),e.jsx("button",{onClick:p,disabled:i||!s.bank&&!s.crypto&&!s.expenses,className:"w-full px-4 py-2 bg-accent-warning text-white rounded-lg hover:bg-accent-warning/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Importing...":"Import Finance Data"}),o&&e.jsx("div",{className:"p-3 bg-surface border border-border rounded-lg",children:e.jsx("p",{className:"text-sm text-text-primary",children:o})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-accent-warning/5 border border-accent-warning/20 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-accent-warning mb-2",children:"📊 Expected Data from Your Files"}),e.jsxs("div",{className:"text-sm text-text-secondary space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Crypto:"})," 11 holdings worth $130.72 (USDC, TRX, SOL, ETH, etc.)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Expenses:"})," ~50+ transactions from Zepto, Swiggy, Blinkit, Supertails"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Categories:"})," Food, Pet Care, Groceries, Fitness, Personal Care"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total Value:"})," ~₹25,000+ in expenses tracked"]})]})]})]})}export{g as default};
