---
// UK Student Life Optimization Dashboard
// Main dashboard page that integrates all UK student features

import Layout from '../layouts/Layout.astro';
import { UKStudentDashboard } from '../components/uk-student/UKStudentDashboard';
import type { UKStudentProfile } from '../types/uk-student';

// Mock user data - in a real app this would come from authentication
const userId = 'demo-user-id';

// Create a mock profile with sample data
const mockProfile: UKStudentProfile = {
  user_id: userId,
  preferences: {
    id: 'pref-1',
    user_id: userId,
    home_location: 'Five Ways',
    transport_preference: 'mixed',
    cooking_time_limits: {
      breakfast: 10,
      lunch: 20,
      dinner: 30
    },
    dietary_restrictions: [],
    bulk_cooking_frequency: 7,
    budget_alert_enabled: true,
    weather_notifications: true,
    laundry_reminder_enabled: true,
    skincare_tracking_enabled: true,
    created_at: new Date(),
    updated_at: new Date()
  },
  current_location: {
    name: 'Five Ways',
    coordinates: [52.4751, -1.9180],
    type: 'home'
  },
  academic_schedule: [
    {
      id: '1',
      user_id: userId,
      title: 'EMH Lecture',
      type: 'class',
      start_time: new Date('2024-11-20T09:00:00'),
      end_time: new Date('2024-11-20T10:00:00'),
      location: 'Building A',
      building: 'A',
      importance: 4,
      preparation_time: 15,
      travel_time: 20,
      created_at: new Date(),
      updated_at: new Date()
    },
    {
      id: '2',
      user_id: userId,
      title: 'Corporate Finance',
      type: 'class',
      start_time: new Date('2024-11-20T14:00:00'),
      end_time: new Date('2024-11-20T15:30:00'),
      location: 'Building B',
      building: 'B',
      importance: 4,
      preparation_time: 15,
      travel_time: 20,
      created_at: new Date(),
      updated_at: new Date()
    }
  ],
  active_routines: [
    {
      id: '1',
      user_id: userId,
      routine_type: 'morning',
      name: 'Morning Routine',
      steps: [
        {
          id: '1',
          name: 'Shower',
          estimated_duration: 15,
          order: 1,
          required: true
        },
        {
          id: '2',
          name: 'Skincare',
          estimated_duration: 10,
          order: 2,
          required: true
        }
      ],
      estimated_duration: 45,
      frequency: 'daily',
      completion_streak: 5,
      is_active: true,
      created_at: new Date(),
      updated_at: new Date()
    },
    {
      id: '2',
      user_id: userId,
      routine_type: 'evening',
      name: 'Evening Routine',
      steps: [
        {
          id: '1',
          name: 'Dinner',
          estimated_duration: 30,
          order: 1,
          required: true
        },
        {
          id: '2',
          name: 'Study',
          estimated_duration: 60,
          order: 2,
          required: false
        }
      ],
      estimated_duration: 90,
      frequency: 'daily',
      completion_streak: 3,
      is_active: true,
      created_at: new Date(),
      updated_at: new Date()
    }
  ],
  budget_limits: [],
  dietary_preferences: {
    restrictions: [],
    allergies: [],
    preferred_cuisines: ['British', 'Asian'],
    cooking_skill_level: 3,
    meal_prep_preference: 'batch'
  },
  transport_preferences: {
    preferred_method: 'mixed',
    weather_threshold: 0.5,
    cost_sensitivity: 'high',
    time_sensitivity: 'medium'
  }
};
---

<Layout title="UK Student Life Optimization Dashboard">
  <UKStudentDashboard 
    userId={userId}
    profile={mockProfile}
    client:load
  />
</Layout>